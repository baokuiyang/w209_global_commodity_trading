<!DOCTYPE html>
<html lang="en">

<head>
    <title>Global Commodity Trading</title>
    <meta charset="utf-8" http-equiv="encoding">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap cdn -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/main.css">
    <!-- Crossfilter cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
    <!-- D3 V4 -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

    <!-- JS to do the tab switch -->
    <script src="js/tab.js"></script>
    <!-- common util JSs -->
    <script src="js/commodity_id_map.js"></script>
    <script src="js/country_id_map.js"></script>
    <script src="js/trade_type_map.js"></script>
</head>

<body>
    <center>
        <div class="header">
            <h1> Global Commodity Trading </h1>
            <i>
                <p>global commodity trading statistics from 1988 to 2019</p>
            </i>
        </div>
        <div class="tab">
            <button class="tablinks active" onclick="openTab(event, 'MicroView')">Overview</button>
            <button class="tablinks" onclick="openTab(event, 'CountryView')">Insights By Country</button>
            <button class="tablinks" onclick="openTab(event, 'CommodityView')">Insights by Commodity</button>
            <button class="tablinks " onclick="openTab(event, 'AboutView')">About</button>
        </div> 

        <div id="CountryView" class="tabcontent">  
            <div class="intro_header">
                <h4>
                    <small>
                        This tab shows the insights for the selected countries. <br>
                        All charts are connected, you can click
                         on anyone to drill down the data.                          <br>
                         <b><i>Please refresh the page in case the charts are not rendered correctly.</i></b> 

                    </small>
                </h4>
                <br>
            </div>

            <div id="CountryViewChart">  
                <div class='tableauPlaceholder' id='viz1595658185426' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Co&#47;Country_View_Update&#47;CountryView&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='Country_View_Update&#47;CountryView' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Co&#47;Country_View_Update&#47;CountryView&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en' /><param name='device' value='desktop'/></object></div>              

                <script type='text/javascript'>          
                          var divElement = document.getElementById('viz1595658185426');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else { vizElement.style.width='100%';vizElement.style.height='1377px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);               
                </script>
 
 
                <!--
                <iframe src="https://public.tableau.com/views/Country_View_Update/CountryView?:language=en&:display_count=y&:origin=viz_share_link&&:embed=true"
                        width="1000" height="800">   
                </iframe> 
                -->
            </div>  
        </div>

        <div id="CommodityView" class="tabcontent"> 
            <div class="intro_header">
                <h4>
                    <small>
                        This tab shows the insights for the selected commodities. <br>
                        All charts are connected, you can click on anyone to drill down the data. <br>
                        <b><i>Please refresh the page in case the charts are not rendered correctly.</i></b> 
                    </small>
                </h4>
                <br>
            </div>
            <div id="CommodityViewChart">

                <div class='tableauPlaceholder' id='viz1595740262475' style='position: relative'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Co&#47;CountryPairView&#47;Dashboard2&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='CountryPairView&#47;Dashboard2' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Co&#47;CountryPairView&#47;Dashboard2&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='device' value='desktop'/><param name='language' value='en' /><param name='filter' value='publish=yes' /></object></div>                

                <script type='text/javascript'>                    var divElement = document.getElementById('viz1595740262475');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else { vizElement.style.width='100%';vizElement.style.height='1277px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
 
            </div>
        </div>

 
        <div id="MicroView" class="tabcontent defaultTab"> 
            <div class="intro_header">
                <h4><small>
                    This is the overview of global trading statistics released by the United Nations. <br>
                    In the case of <i>"China imports $10B Iron and Steel from USA in 2018"</i>, 
                    China here is the <b><i>Reporting Country</i></b> and USA is the <b><i>Partner Country</i></b>.
                </small></h4>
                <br>
            </div>
            <div id="MicroViewSelectionArea">
                <div class="col-xs-12 col-md-2"></div>
                <div class="col-xs-12 col-md-2">
                    <b>Reporting Country</b><br>
                    <select name="ReportingCountry" id="s_rcountry" class="selector"> </select>
                </div>
                <div class="col-xs-12 col-md-2">
                    <b>Partner Country</b><br>
                    <select name="PartnerCountry" id="s_pcountry" class="selector">  </select>
                </div>
                <div class="col-xs-12 col-md-2">
                    <b>Commodity</b><br>
                    <select name="Commodity" id="s_commodity" class="selector">   </select>
                </div> 
                <div class="col-xs-12 col-md-2">
                    <b>Import / Export</b><br>
                    <select name="TradeType" id="s_trade_type" class="selector">  </select>
                </div>
                <div class="col-xs-12 col-md-2"></div>
            </div>
            <div id="svg_area" class="col-xs-12 col-md-12">
                <!-- Timeline, take one row --> 
                <h3><b><small>Trade volume in US dollar by year (brush to select)</small></b></h3>
                <br>
                <!-- Timeline Chart -->
                <div id="timeline"></div>    
                
                <!-- Selected years and trade volume -->
                <div class="col-xs-12"> 
                    <div id="selection_info"></div> 
                </div> 

                <!-- top commodities/countries -->
                <div class="col-xs-12 col-md-4"> 
                    <b>Top Reporting Countries </b>  
                    <div  id="top_r_cc"></div>
                </div>
                <div class="col-xs-12 col-md-4">
                    <b>Top Partner Countries </b>  
                    <div  id="top_p_cc"></div>
                </div>
                <div class="col-xs-12 col-md-4">
                    <b>Top Commodities </b>  
                    <div  id="top_cmd"></div>
                </div>  
            </div> 
        </div>

        <div id="AboutView" class="tabcontent">
            <h3>W209 Final Project, Summer 2020 
                <small>
                    <br> BK (Baokui) Yang, Daniel Luo, Tay Park
                    <br>{baokui, luodanqi123, taeil.park}@berkeley.edu
                </small>
            </h3>
            
            <br>
            <br>
            <br>
            <div id="introduction">
                <p><b>Basic Terms</b></p>
                  <ul>
                    <li><p>Reporting Country<br>
                        The country which reports trading data to the United Nations.</li></p>
                    <li><p>Partner Country<br>
                        The partner country of the reporting country, i.e., the other side of the trade. For example, if China reports it imported $100B soybean from the US in 2018, then in this case, China is the reporting country, and US is the partner country. </p></li>
                    <li><p>Commodity<br>
                        The category of the commodity, the site only shows the top level commodity categories. </p></li>
                </ul>

                <br>
                <p><b>The data is visualized in the following 4 views.</b></p>
                <ul>
                    <li><p>Global View <br>
                        The overview of global trading, which shows the overall trading trend in the past 30 years, the leading countries, etc.
                        </p>
                    </li>
                    <li> <p>Country View <br>
                        This view shows trading insights about one individually selected country, which includes its total trading value, top traded commodities, top partner countries, etc.</p>
                    </li>
                    <li><p>Commodity View <br>
                        This view shows trading insights about one individually selected commodity category, e.g., the annual total trading volume, countries leading the import/export. </p>
                    </li>
                    <li><p>Micro View <br>
                        In this view, users can drill down the trading statistics all the way to  every combination of {Reporting Country} X {Partner Country} X {Commodity} X {Import/Export} X {Year} </p>
                    </li>
                </ul>

                <br>
                <p>
                    Most of the graphs are highly interactive, you can click or brush to drill down into the interested time window, country, or commodity.
                </p>
    
                <br>
                <p><b>Disclaimer</b></p>
                <p>
                    The visualization is based on the trading data released by the UN, which may not be complete or contain errors, given not every country is reporting their data to the UN, and not all of them are reporting it accurately.
                </p>

                <br>
                <p>
                    Here is the GitHub Repo with code and more detailed references, for further information, please feel free to contact us at: {baokui, luodanqi123, taeil.park}@berkeley.edu
                </p>
 
             </div>
        </div>

        <!-- Rendering JS -->
            <script src="js/timeSeriesChart.js"></script>
            <script src="js/micro_view.js"></script>
        <!-- 
            <script src="js/global_view.js"></script>
            <script src="js/country_view.js"></script>
            <script src="js/commodity_view.js"></script>
            <script src="js/country_pair_view.js"></script> 
        -->
    </center>
</body>

</html>
